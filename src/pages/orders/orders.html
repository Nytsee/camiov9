<!--
  Generated template for the OrdersPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->

<ion-header #currentHeader>

  <ion-navbar hideBackButton="true">
    <ion-title>Détail des Missions</ion-title>
    <ion-buttons end>
      <button ion-button icon-only class="dropDownHeader_Btn">
          <i class="material-icons">more_vert</i>
      </button>
    </ion-buttons>    
  </ion-navbar>

</ion-header>
<div class="contentDrop">
  <ul>
      <li (click)="logout();" ><span>Se déconnecter</span> <i class="material-icons">power_settings_new</i></li>
  </ul>
</div>

<ion-content>

   
    <ion-refresher *ngIf="TabIndex != 1" (ionRefresh)="doRefresh($event)">
        <ion-refresher-content
          pullingIcon="arrow-dropdown"
          pullingText="Tirer pour recharger"
          refreshingSpinner="crescent"
          refreshingText="Chargement...">
        </ion-refresher-content>
      </ion-refresher>


  <mat-card>
    <mat-card-content>
      <mat-tab-group class="demo-tab-group" (selectedTabChange)="getIdxTab($event)">



        <mat-tab label="Liste">
            <ng-template mat-tab-label>
                <i class="material-icons md-20">view_list</i><br>Missions
              </ng-template>

                      <!-- Internet fucked up -->
                      <!-- <div class="instructionOrder">
                        <ion-grid>
                            <ion-row center>
                              <ion-col col-2 class="txtCenter">
                                  <i class="material-icons">
                                      touch_app
                                  </i>
                              </ion-col>
                              <ion-col col-10>
                                  <div class="currentStatus">En attente de confirmation</div>
                                  <div class="creneauOrder">{{ currentDate| date: "dd/MM/yyyy - HH:mm a" }}</div>
                              </ion-col>

                                <div class="inLineAlert">
                                    <strong>Attention !</strong> les missions ne sont pas encore
                                    confirmées
                                </div>

                          <div class="cont_btns adjustable">
                            <button ion-button class="classicBtn greenBtn" round>
                              <i class="material-icons">done</i>
                              Confirmer
                            </button>
                          </div>

                        </ion-row>
                        </ion-grid>

                    </div>  -->

              <div class="cont_Orders" padding>

                              <div class="elem_order" (click)="detail(mission.id)" *ngFor="let mission of missionsList">

                                  <ion-grid>
                                      <ion-row center>
                                        <ion-col col-2 class="txtCenter">
                                            <i class="material-icons">
                                              {{IconMission[mission.status]}}
                                            </i>

                                        </ion-col>
                                        <ion-col col-8>
                                            <div class="order_client">{{mission.reference}}</div>

                                            <div class="order_circuit">
                                                <div class="iconFromTo"><i class="material-icons">flag</i></div>
                                                <div>{{mission.infos_loading.location.name}}</div>
                                            </div>
                                            <div class="order_creneau_and_status">
                                                <div class="iconTime"><i class="material-icons">access_time</i></div>
                                                <div class="detailTime">{{mission.status}} - {{mission.infos_loading.location.time_start}}</div>
                                              </div>
                                              <div class="order_circuit">
                                                <div class="iconFromTo"><i class="material-icons">location_on</i></div>
                                                <div>{{mission.infos_delivery.location.name}}</div>
                                              </div>
                                              <div class="order_creneau_and_status">
                                                <div class="iconTime"><i class="material-icons">access_time</i></div>
                                                <div class="detailTime">{{mission.status}} - {{mission.infos_delivery.location.time_start}}</div>
                                              </div>


                                        </ion-col>
                                        <ion-col col-2 class="txtCenter activeOrderList" >
                                            <i class="material-icons">chevron_right</i>
                                        </ion-col>
                                      </ion-row>
                                    </ion-grid>

                              </div>
                            </div><!--cont_Orders -->
</mat-tab>

<mat-tab label="Map">
      <ng-template mat-tab-label>
        <i class="material-icons md-20">map</i><br>Map / {{heightMapView}}
      </ng-template>

        <div #map id="map" [style.height]="heightMapView">

          <!-- Here is the map. -->

      </div>
      <div id="relocateMe" (click)="koko(userPosLat,userPosLng);">
        <a href="#"><i class="material-icons">my_location</i></a>
      </div>
      <!-- <div id="yes" (click)="AdjustMapHeight()">Click me</div> -->

</mat-tab>

<mat-tab label="">
    <ng-template mat-tab-label>
    <i class="material-icons md-20">chat</i><br>Discussions
    </ng-template>


    <div id="headerChat" *ngFor="let chatInfo of chatInfos">
      <ion-grid>
        <ion-row center>
              <ion-col col-2 class="txtCenter">
                  <i class="material-icons bgiconWhite">
                      sms
                  </i>
              </ion-col>
              <ion-col col-10 class="headerContentChat" >
                  <ion-row>
                  <ion-col col-1>
                    <i class="material-icons">flag</i>
                  </ion-col>
                  <ion-col col-11>
                      {{chatInfo.infos_loading.location.name}}
                  </ion-col>
                   <br>
                  <ion-col col-1>
                      <i class="material-icons">room</i>
                  </ion-col>
                  <ion-col col-11>
                    {{chatInfo.infos_delivery.location.name}}
                  </ion-col>
                </ion-row>
    
            </ion-col>
        </ion-row>
      </ion-grid>
      </div> 
      <!-- headerChat -->
    
    
      <div id="timeLine_chat">
        <div class="wrapMsgChat">
            <div class="resp_user">Hello How are you my friend
            <div class="time_msg">18:04</div>
            </div>
        </div>
    
        <div class="wrapMsgChat">
        <div class="resp_contact">Yeah ! fine, what is going on ? long time no see !
            <div class="time_msg">18:13</div>
            <div class="msgFrom_name">Reda Despatch 10 - Maroc Cargo SA</div>
        </div>   
        </div>
    
        <div class="wrapMsgChat">
        <div class="resp_user">Seriously?
            <div class="time_msg">18:22</div>
          </div>
        </div>  
      
    
        <div class="wrapMsgChat">
          <div class="resp_contact">How did the Italian chef die? He pasta way. The doctors cannoli do so much.
              <div class="time_msg">18:38</div>
              <div class="msgFrom_name">Reda Despatch 10 - Maroc Cargo SA</div>
          </div>  
        </div>  
          
    
        <div class="wrapMsgChat">
          <div class="resp_user">Hello How are you my friend
              <div class="time_msg">18:04</div>
            </div>
        </div>
    
        <div class="wrapMsgChat">
            <div class="resp_contact">Yeah ! fine, what is going on ? long time no see !
                <div class="time_msg">18:13</div>
                <div class="msgFrom_name">Reda Despatch 10 - Maroc Cargo SA</div>
            </div>  
        </div>     
            
        <div class="wrapMsgChat">
            <div class="resp_user">Seriously?
                <div class="time_msg">18:22</div>
              </div>
        </div>      
          
        <div class="wrapMsgChat">
              <div class="resp_contact">How did the Italian chef die? He pasta way. The doctors cannoli do so much.
                  <div class="time_msg">18:38</div>
                  <div class="msgFrom_name">Reda Despatch 10 - Maroc Cargo SA</div>
              </div>   
        </div>          
    
      </div> 
    
     <div id="inputMsg">
            <ion-grid>
                    <ion-row center>
                          <ion-col col-10 class="txtCenter">
                                  <ion-item>
                                    <ion-textarea (ionFocus)="fixScroll()"  (ionBlur)="BlurScroll()"[(ngModel)]="msgChat" class="inputChat" name=""></ion-textarea> 
                                  </ion-item>
                          </ion-col>
                          <ion-col col-2 class="txtCenter">
                                <i class="material-icons sendIconMsg" (click)="sendMsgChat()">
                                    send
                                </i>
                          </ion-col>                      
                    </ion-row>
            </ion-grid>
                
     </div>

  
</mat-tab>



</mat-tab-group>
</mat-card-content>
</mat-card>



 



</ion-content>

<div id="chat_tools">
  <ion-grid>
      <ion-row center>
          <ion-col col-3 class="txtCenter ">
              <i class="material-icons">group</i>
          </ion-col>
          <ion-col col-3 class="txtCenter">
              <i class="material-icons">attach_file</i>
          </ion-col>
          <ion-col col-3 class="txtCenter">
              <i class="material-icons">mic</i>
          </ion-col>       
          <ion-col col-3 class="txtCenter">
              <i class="material-icons">thumb_up</i>
          </ion-col>                         
      </ion-row>
   </ion-grid> 
</div>
<!-- chat_tools -->  